
{% extends "analytics/base.html" %}
{% block content %}
<h1>Video Analytics</h1>

<table class="table table-striped">
  <thead><tr><th>Title</th><th>Genre</th><th>Views</th><th>Avg Watch (s)</th><th>Rewatch %</th></tr></thead>
  <tbody>
  {% for v in videos %}
    <tr>
      <td>{{ v.title }}</td>
      <td>{{ v.genre }}</td>
      <td>{{ v.total_views }}</td>
      <td>{{ v.avg_watch|default:0|floatformat:1 }}</td>
      <td>
        {% if v.total_views %}
            {% widthratio v.rewatch_count v.total_views 100 as pct %}
            {{ pct|floatformat:1 }}%
        {% else %}
            0%
        {% endif %}
    </td>
    </tr>
  {% empty %}
    <tr><td colspan="5">No videos</td></tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
